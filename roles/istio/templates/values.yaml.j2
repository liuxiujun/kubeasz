global:
  proxy:
    #只包含本k8s内的pod、svc网段
    includeIPRanges: "{{ SERVICE_CIDR }},{{ CLUSTER_CIDR }}"
  #取消policy前置检查
  disablePolicyChecks: true
  #policy模块可以失败
  policyCheckFailOpen: true


gateways:
  enabled: false

galley:
  enabled: false

tracing:
  enabled: false

servicegraph:
  enabled: false

#
# mixer configuration
#
mixer:
  enabled: true
  replicaCount: 3
  autoscaleMin: 3
  autoscaleMax: 10

  istio-policy:
    autoscaleEnabled: true
    autoscaleMin: 3
    autoscaleMax: 10
    cpu:
      targetAverageUtilization: 80

  istio-telemetry:
    autoscaleEnabled: true
    autoscaleMin: 3
    autoscaleMax: 10
    cpu:
      targetAverageUtilization: 80

#
# pilot configuration
#
pilot:
  enabled: true
  replicaCount: 3
  autoscaleMin: 3
  autoscaleMax: 10
  image: pilot
  # Resources for a small pilot install
  resources:
    requests:
      cpu: 1
      memory: 4048Mi
  cpu:
    targetAverageUtilization: 80

prometheus:
  enabled: true
  service:
    nodePort:
      enabled: true
      port: 32090
  security:
    enabled: false
    adminUser: admin
    adminPassword: mxnavi

grafana:
  enabled: true
  persist: false
  storageClassName: ""
  service:
    type: NodePort

kiali:
  enabled: true
  hub: docker.io/kiali
  tag: v0.9
  ingress:
    enabled: true
    ## Used to create an Ingress record.
    hosts:
      - kiali.istio.{{ CLUSTER_NAME }}.mxnavi.com
    annotations:
      # kubernetes.io/ingress.class: nginx
      # kubernetes.io/tls-acme: "true"
    tls:
      # Secrets must be manually created in the namespace.
      # - secretName: kiali-tls
      #   hosts:
      #     - kiali.local
  dashboard:
    username: admin
    # Default admin passphrase for kiali. Must be set during setup, and
    # changed by overriding the secret
    passphrase: mxnavi

    # Override the automatically detected Grafana URL, usefull when Grafana service has no ExternalIPs
    grafanaURL: http://grafana:3000

    # Override the automatically detected Jaeger URL, usefull when Jaeger service has no ExternalIPs
    # jaegerURL: http://jaeger-query:16686
